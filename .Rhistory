se = round(sd(bottom_depth.cm), sqrt(n)),2,
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID) %>%
dplyr::summarise(mean = round(mean(bottom_depth.cm),2),
se = round(sd(bottom_depth.cm), sqrt(n())),2,
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID) %>%
dplyr::summarise(mean = round(mean(bottom_depth.cm),2),
se = round(sd(bottom_depth.cm), sqrt(n())),2,
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID) %>%
dplyr::summarise(mean = mean(bottom_depth.cm),
se = sd(bottom_depth.cm), sqrt(n()),
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID) %>%
dplyr::summarise(mean = mean(bottom_depth.cm),
se = (sd(bottom_depth.cm)/sqrt(n())),
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID) %>%
dplyr::summarise(max = max(bottom_depth.cm),
se = (sd(bottom_depth.cm)/sqrt(n())),
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID) %>%
dplyr::summarise(max = max(bottom_depth.cm),
mean = mean(bottom_depth.cm),
se = (sd(bottom_depth.cm)/sqrt(n())),
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm)) %>%
dplyr::summarise(mean = mean(bottom_depth.cm),
se = (sd(bottom_depth.cm)/sqrt(n())),
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm)) %>%
ungroup() %>%
group_by(site_ID) %>%
dplyr::summarise(mean = mean(bottom_depth.cm),
se = (sd(bottom_depth.cm)/sqrt(n())),
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm)) %>%
ungroup() %>%
group_by(site_ID) %>%
dplyr::summarise(mean = mean(max),
se = (sd(mean)/sqrt(n())),
count = n())
om_sommos =
sommos %>%
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
filter(organic == organic) %>%
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm)) %>%
ungroup() %>%
group_by(site_ID) %>%
dplyr::summarise(mean = mean(max),
se = (sd(max)/sqrt(n())),
count = n())
om_sommos %>%  knitr::kable()
write.csv(om_sommos, "output/om_sommos.csv", row.names = FALSE)
write.csv(om_sommos, "output/om_sommos.csv", row.names = FALSE)
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum organic depth within each plot
group_by(site_ID, plot)
View(om_sommos_max)
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(tom_depth.cm))
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(top_depth.cm))
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(bottom_depth.cm))
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum organic depth within each plot
group_by(site_ID, plot)
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm))
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(thickness < 0)
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(min < 0)
om_sommos_min =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(min < 0)
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup()
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(max > 0)
om_sommos_min =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(min < 0)
View(om_sommos_min)
View(om_sommos_max)
om_sommos_min =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(min < 0) %>%
mutate(thickness = min*100)
om_sommos_min =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(min < 0) %>%
mutate(thickness = min*(-1))
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(max > 0) %>%
mutate(thickness = max)
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(max > 0) %>%
mutate(thickness = max) %>%
select(c(site_ID, plot, thickness))
om_sommos_min =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(min < 0) %>%
mutate(thickness = min*(-1)) %>%
select(c(site_ID, plot, thickness))
om_sommos_mean =
om_sommos_max %>%
rbind(om_sommos_min)
View(om_sommos_mean)
om_sommos_mean =
om_sommos_max %>%
rbind(om_sommos_min)
#calculate the mean and se lowest depth of organic horizon per site
#calculate the number of plots with organic horizons per site
group_by(site_ID) %>%
dplyr::summarise(mean = mean(thickness),
se = (sd(thickness)/sqrt(n())),
count = n())
om_sommos_mean =
om_sommos_max %>%
rbind(om_sommos_min)
#calculate the mean and se lowest depth of organic horizon per site
#calculate the number of plots with organic horizons per site
group_by(site_ID)
om_sommos_mean =
om_sommos_max %>%
rbind(om_sommos_min) %>%
#calculate the mean and se lowest depth of organic horizon per site
#calculate the number of plots with organic horizons per site
group_by(site_ID) %>%
om_sommos_mean =
om_sommos_max %>%
rbind(om_sommos_min) %>%
#calculate the mean and se lowest depth of organic horizon per site
#calculate the number of plots with organic horizons per site
group_by(site_ID) %>%
dplyr::summarise(mean = mean(thickness),
se = (sd(thickness)/sqrt(n())),
count = n())
om_sommos_mean =
om_sommos_max %>%
rbind(om_sommos_min) %>%
#calculate the mean and se lowest depth of organic horizon per site
#calculate the number of plots with organic horizons per site
group_by(site_ID) %>%
dplyr::summarise(mean = mean(thickness),
se = (sd(thickness)/sqrt(n())),
count = n())
View(om_sommos_mean)
om_sommos_mean %>%  knitr::kable()
write.csv(om_sommos, "output/om_sommos.csv", row.names = FALSE)
write.csv(om_sommos_mean, "output/om_sommos_mean.csv", row.names = FALSE)
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic != organic)
View(om_sommos_none)
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
om_sommos_mean %>%  knitr::kable()
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic"))
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
mutate(organic = stringi::stri_replace_all_fixed(organic, "NA","0"))
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
mutate(organic = stringi::stri_replace_all_fixed(organic, "NA","0"))
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace_na(0)
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace_na(organic, 0)
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace(is.na(.), 0)
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace(is.na(.), 0)  %>%
group_by(site_ID)
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace(is.na(.), 0)  %>%
group_by(site_ID) %>%
dplyr::summarise(sum = sum(organic))
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace(is.na(.), 0)  %>%
group_by(site_ID) %>%
dplyr::summarise(max = max(organic))
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace(is.na(.), 0)  %>%
group_by(site_ID) %>%
dplyr::summarise(max = max(organic)) %>%
#filter out sites with organic horizons
filter(max < 1)
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace(is.na(.), 0)  %>%
group_by(site_ID) %>%
dplyr::summarise(max = max(organic)) %>%
#filter out sites with organic horizons
filter(max < 1) %>%
rename(mean = max)
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace(is.na(.), 0)  %>%
group_by(site_ID) %>%
dplyr::summarise(max = max(organic)) %>%
#filter out sites with organic horizons
filter(max < 1) %>%
rename(mean = max) %>%
dplyr::mutate(se = 0)
om_sommos_none =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"1")) %>%
replace(is.na(.), 0)  %>%
group_by(site_ID) %>%
dplyr::summarise(max = max(organic)) %>%
#filter out sites with organic horizons
filter(max < 1) %>%
rename(mean = max) %>%
dplyr::mutate(se = 0,
count = 0)
om_finaldata =
om_sommos_mean %>%
rbind(om_sommos_none)
View(om_finaldata)
om_finaldata %>%  knitr::kable()
write.csv(om_finaldata, "output/om_finaldata.csv", row.names = FALSE)
#packages
source("code/0-packages.R")
#load data
sommos = read.csv("processed/SOMMOS_horizonation.csv") %>% select(c(site_ID, plot, horizon,
top_depth.cm, bottom_depth.cm,
thickness.cm))
View(sommos)
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic)
View(om_sommos_max)
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(max > 0) %>%
mutate(thickness = max)
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic)
View(om_sommos_max)
om_sommos_allorganic =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic)
write.csv(om_sommos_allorganic, "output/om_sommos_allorganichorizons.csv", row.names = FALSE)
#packages
source("code/0-packages.R")
#load data
sommos = read.csv("processed/SOMMOS_horizonation.csv") %>% select(c(site_ID, plot, horizon,
top_depth.cm, bottom_depth.cm,
thickness.cm))
om_sommos_max =
sommos %>%
#distinguish organic horizons
dplyr::mutate(organic = case_when(grepl("O", horizon)~"organic")) %>%
#filter out sites without any organic horizons
filter(organic == organic) %>%
#get the maximum and minimum organic depth within each plot
group_by(site_ID, plot) %>%
dplyr::summarise(max = max(bottom_depth.cm),
min = min(thickness.cm)) %>%
ungroup() %>%
filter(max > 0) %>%
mutate(thickness = max) %>%
select(c(site_ID, plot, thickness))
View(om_sommos_max)
